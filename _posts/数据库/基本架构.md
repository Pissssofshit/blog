## 基本架构

```mermaid
stateDiagram-v2
    客户端 --> 连接器
    连接器 --> 查询缓存
    连接器 --> 分析器
    分析器 --> 查询缓存
    分析器 --> 优化器
    优化器 --> 执行器
```

### 连接器
管理连接，权限验证
### 查询缓存
查询缓存的失效非常频繁，只要有对一个表的更新，这个表上所有的查询缓存都会被清空。因此很可能你费劲地把结果存起来，还没使用呢，就被一个更新全清空了。对于更新压力大的数据库来说，查询缓存的命中率会非常低。除非你的业务就是有一张静态表，很长时间才会更新一次。比如，一个系统配置表，那这张表上的查询才适合使用查询缓存。

### 分析器
词法分析

### 优化器
优化器是在表里面有多个索引的时候，决定使用哪个索引；或者在一个语句有多表关联（join）的时候，决定各个表的连接顺序

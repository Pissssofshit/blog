### 编写测试

#### 测试理念

系统设计基于面向接口的架构，所以测试分为两类：*接口交互测试*，*接口具体实现测试*


测试的时候发现 消息处理混合了 消息接收、消息处理的两个功能，给测试造成了困难（Mock)


输入=>被测单元=>预期行为

预期行为：如db存储、消息发送、外部接口调用，


单一职责&接口隔离

最初的设计：

订阅消息、业务处理、消息处理

接口拆分为三个：
